<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../../img/favicon.ico">
        <title>Python binding for Birdee - Birdee Language</title>
        <link href="../../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../../css/font-awesome.min.css" rel="stylesheet">
        <link href="../../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
        <![endif]-->

        <script src="../../js/jquery-1.10.2.min.js" defer></script>
        <script src="../../js/bootstrap-3.0.3.min.js" defer></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script> 
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
            <div class="container">

                <!-- Collapsed navigation -->
                <div class="navbar-header">
                    <!-- Expander button -->
                    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand" href="../..">Birdee Language</a>
                </div>

                <!-- Expanded navigation -->
                <div class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li >
                                <a href="../..">Welcome</a>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">Birdee Language Mannual <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li >
    <a href="../../Birdee Language Mannual/0010HelloWorld/">1. Hello world!</a>
</li>
                                    
<li >
    <a href="../../Birdee Language Mannual/0020Basics/">2. Language Basics</a>
</li>
                                    
<li >
    <a href="../../Birdee Language Mannual/0030FlowControl/">3. Flow Control</a>
</li>
                                    
<li >
    <a href="../../Birdee Language Mannual/0040ScopeAndName/">4. Scope and names</a>
</li>
                                    
<li >
    <a href="../../Birdee Language Mannual/0050Array/">5. Array</a>
</li>
                                    
<li >
    <a href="../../Birdee Language Mannual/0060Class/">6. Class</a>
</li>
                                    
<li >
    <a href="../../Birdee Language Mannual/0070Import/">7. Modules and Imports</a>
</li>
                                    
<li >
    <a href="../../Birdee Language Mannual/0080Template/">8. Templates</a>
</li>
                                    
<li >
    <a href="../../Birdee Language Mannual/0090Script/">9. Compile-time scripts</a>
</li>
                                    
<li >
    <a href="../../Birdee Language Mannual/0100Cpp/">10. Interoperability with C/C++</a>
</li>
                                    
<li >
    <a href="../../Birdee Language Mannual/0110Functional/">11. Functional Programming</a>
</li>
                                    
<li >
    <a href="../../Birdee Language Mannual/0120Exception/">12. Exception handling</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown active">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">Python Binding <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li class="active">
    <a href="./">Python binding for Birdee</a>
</li>
                                    
<li >
    <a href="../0020.Functions/">Birdee binding Functions for Python</a>
</li>
                                    
<li >
    <a href="../0030.Classes/">Binding classes</a>
</li>
                                    
<li >
    <a href="../0040.HighLevelAPI/">0040.HighLevelAPI</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">Tools <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li >
    <a href="../../Tools/Birdee-playground-(REPL)/">Birdee playground</a>
</li>
                                    
<li >
    <a href="../../Tools/Compiler-command-line-mannual/">Command line arguments for compiler (birdeec)</a>
</li>
                                    
<li >
    <a href="../../Tools/bbuild/">The automatic building tool for Birdee - bbuild</a>
</li>
                                </ul>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav navbar-right">
                        <li>
                            <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li >
                                <a rel="next" href="../../Birdee Language Mannual/0120Exception/">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li >
                                <a rel="prev" href="../0020.Functions/">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
                <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
        <li class="main active"><a href="#python-binding-for-birdee">Python binding for Birdee</a></li>
            <li><a href="#how-birdee-compiler-parses-a-source-file">How Birdee compiler parses a source file?</a></li>
            <li><a href="#how-the-python-binding-can-be-invoked">How the Python binding can be invoked</a></li>
    </ul>
</div></div>
                <div class="col-md-9" role="main">

<h1 id="python-binding-for-birdee">Python binding for Birdee</h1>
<p>Birdee depends on Python language for compile-time scripts that can generate and modify the existing program to compile. The Birdee compiler provides various functions and class for Python code that is embeded in the Birdee program, to enable them to access the internal data structures and functions in the Birdee compiler. The set of Python interfaces provided by Birdee is called "Python binding". This series of documents lists the details of how Python embeded scripts can use the interfaces of the Birdee compilers.</p>
<p>First, we will discuss overview of the usage of Python scripts in Birdee code. The Python scripts can be invoked in three ways:</p>
<ul>
<li>
<ol>
<li>By placing them between a pair of <code>{@ ... @}</code>. Here the script will serve as an expression, statement or a type in Birdee code</li>
</ol>
</li>
<li>
<ol>
<li>By adding an annotation on an expression or statement. The python function specified by the annotation will be called</li>
</ol>
</li>
<li>
<ol>
<li>By writing a generative script to generate a Birdee program by an indenpendent Python program(not embeded in Birdee code)</li>
</ol>
</li>
</ul>
<p>In the above apporaches, the Python binding is available for the scripts. You can use the script to</p>
<ul>
<li>Insert code to the existing program being compiled (mainly in approaches 1 and 3)</li>
<li>Alter the existing code (mainly in approach 2)</li>
</ul>
<p>The details of the basics for Birdee scripts have been discussed in the chapter "Compile-time scripts" in Birdee language mannual.</p>
<p>The rest part of this section will talk about the Birdee compiler internals that are related to Python binding and how the Python binding can be invoked.</p>
<h2 id="how-birdee-compiler-parses-a-source-file">How Birdee compiler parses a source file?</h2>
<p>A Birdee program is composed of a list of statements. A simple statement can be a line of code like</p>
<pre><code class="vb">dim a as int
</code></pre>

<p>Some statements can hold other statements. For example, the syntax for "if" statement is:</p>
<pre><code class="vb">if cond then
    ...
else
    ...
end
</code></pre>

<p>So in an "if", there will be a statement for the condition, two lists of statements for the both branches. It is natural to store a parsed Birdee program with a tree, since a statement can hold sub-statements. The tree representing the source code is called an Abstract Syntax Tree (AST). Each node of the tree is a statement in the source code. For example, an "if" node in AST has the structure like:</p>
<pre><code>IF
  - Cond
  - List-True
    - ...
  - List-False
    - ...
</code></pre>

<p>An important part of Python binding of Birdee is the binding for the AST. In Python scripts, the AST for different kinds of statements are wrapped into different Python classes. Developers can access the fields of the AST in the scripts via these Python classes.</p>
<p>In Birdee, some statements may have a "returning value". e.g. The statement <code>add(1,2)</code> returns the function call result. And other statements does not have a returning value. The kinds of statements that may return a value is called "expression". In Birdee's AST, an expression is a sub-class of the statement class. All kinds of AST (e.g. functions, variables definitions, class definitions, ...) are sub-classes of either expression class (called ExprAST in Python binding), or statement class (StatementAST).</p>
<h2 id="how-the-python-binding-can-be-invoked">How the Python binding can be invoked</h2>
<p>Most of binding interfaces of Birdee can be accessed via the Python module "birdeec". For embeded scripts and annotations, all symbols in this module has already been imported. For generative scripts, you need to manually import this Python module.</p>
<p>The binding falls into two catagories. The first is the supporting functions that control the Birdee compiler. e.g. the <code>expr</code> function will call the Birdee compiler to generate an AST by the code given by the Python string. The second part of the binding is the AST classes for different kinds of statements. In each of the AST classes, you can read and write to the internal properties of the nodes to inspect and modify the Birdee program.</p>
<p>Based on the Python binding, we also provide some higher level APIs that can simplify the operations of the scripts. </p></div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>
            var base_url = "../..",
                shortcuts = {"search": 83, "next": 78, "help": 191, "previous": 80};
        </script>
        <script src="../../js/base.js" defer></script>
        <script src="../../search/main.js" defer></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="exampleModalLabel">Search</h4>
            </div>
            <div class="modal-body">
                <p>
                    From here you can search these documents. Enter
                    your search terms below.
                </p>
                <form role="form">
                    <div class="form-group">
                        <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="Keyboard Shortcuts Modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="exampleModalLabel">Keyboard Shortcuts</h4>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
