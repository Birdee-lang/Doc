<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../../img/favicon.ico">
        <title>Birdee binding Functions for Python - Birdee Language</title>
        <link href="../../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../../css/font-awesome.min.css" rel="stylesheet">
        <link href="../../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
        <![endif]-->

        <script src="../../js/jquery-1.10.2.min.js" defer></script>
        <script src="../../js/bootstrap-3.0.3.min.js" defer></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script> 
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
            <div class="container">

                <!-- Collapsed navigation -->
                <div class="navbar-header">
                    <!-- Expander button -->
                    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand" href="../..">Birdee Language</a>
                </div>

                <!-- Expanded navigation -->
                <div class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li >
                                <a href="../..">Welcome</a>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">Birdee Language Mannual <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li >
    <a href="../../Birdee Language Mannual/0010HelloWorld/">1. Hello world!</a>
</li>
                                    
<li >
    <a href="../../Birdee Language Mannual/0020Basics/">2. Language Basics</a>
</li>
                                    
<li >
    <a href="../../Birdee Language Mannual/0030FlowControl/">3. Flow Control</a>
</li>
                                    
<li >
    <a href="../../Birdee Language Mannual/0040ScopeAndName/">4. Scope and names</a>
</li>
                                    
<li >
    <a href="../../Birdee Language Mannual/0050Array/">5. Array</a>
</li>
                                    
<li >
    <a href="../../Birdee Language Mannual/0060Class/">6. Class</a>
</li>
                                    
<li >
    <a href="../../Birdee Language Mannual/0070Import/">7. Modules and Imports</a>
</li>
                                    
<li >
    <a href="../../Birdee Language Mannual/0080Template/">8. Templates</a>
</li>
                                    
<li >
    <a href="../../Birdee Language Mannual/0090Script/">9. Compile-time scripts</a>
</li>
                                    
<li >
    <a href="../../Birdee Language Mannual/0100Cpp/">10. Interoperability with C/C++</a>
</li>
                                    
<li >
    <a href="../../Birdee Language Mannual/0110Functional/">11. Functional Programming</a>
</li>
                                    
<li >
    <a href="../../Birdee Language Mannual/0120Exception/">12. Exception handling</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown active">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">Python Binding <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li >
    <a href="../0010.Overview/">Python binding for Birdee</a>
</li>
                                    
<li class="active">
    <a href="./">Birdee binding Functions for Python</a>
</li>
                                    
<li >
    <a href="../0030.Classes/">Binding classes</a>
</li>
                                    
<li >
    <a href="../0040.HighLevelAPI/">High level APIs</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">Tools <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li >
    <a href="../../Tools/Birdee-playground-(REPL)/">Birdee playground</a>
</li>
                                    
<li >
    <a href="../../Tools/Compiler-command-line-mannual/">Command line arguments for compiler (birdeec)</a>
</li>
                                    
<li >
    <a href="../../Tools/bbuild/">The automatic building tool for Birdee - bbuild</a>
</li>
                                </ul>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav navbar-right">
                        <li>
                            <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li >
                                <a rel="next" href="../0010.Overview/">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li >
                                <a rel="prev" href="../0030.Classes/">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
                <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
        <li class="main active"><a href="#birdee-binding-functions-for-python">Birdee binding Functions for Python</a></li>
            <li><a href="#compiler-controling-in-generative-script">Compiler Controling in generative script</a></li>
            <li><a href="#environment-queries">Environment queries</a></li>
            <li><a href="#compiler-state-queries-and-control">Compiler state queries and control</a></li>
    </ul>
</div></div>
                <div class="col-md-9" role="main">

<h1 id="birdee-binding-functions-for-python">Birdee binding Functions for Python</h1>
<p>This chapter lists the functions provided by Birdee that can be called from Python. Note that some of the functions are only avaliable in generative script mode and is invisible for embeded scripts in Birdee source code. The following documents uses python's type hint syntax to show the prototypes of the APIs.</p>
<h2 id="compiler-controling-in-generative-script">Compiler Controling in generative script</h2>
<ul>
<li><code>clear_compile_unit</code></li>
</ul>
<pre><code class="python">def clear_compile_unit()
</code></pre>

<p>Only in generative script mode. Reset the compiler and clear all parsed data of the current compiled program. The compiler will be ready to compile a new program.</p>
<ul>
<li><code>top_level</code></li>
</ul>
<pre><code class="python">def top_level(source: str)
</code></pre>

<p>Only in generative script mode. It accepts a string that contains one or more lines of top-level Birdee code. It will parse the source string into AST and insert the AST nodes into the top-level of the currently compiled program. A <code>TokenizerException</code> may be throw if parsing the source into AST fails. Note: this function only convert the source code into AST. You may need to call <code>process_top_level</code> to check the correctness of the parsed AST. You can call <code>top_level</code> for multiple times to insert several pieces of code into the top-level. The latter call to this function will append the code to the AST list of the previous call to this function. </p>
<ul>
<li><code>process_top_level</code></li>
</ul>
<pre><code class="python">def process_top_level()
</code></pre>

<p>Only in generative script mode. Process the AST that is generated by calls to the function <code>top_level</code>. A <code>CompileException</code> may be throw if there is an error in the AST (e.g. type mismatch for variable assignment). You can only call this function one time before you reset the compiler by <code>clear_compile_unit</code>.</p>
<ul>
<li><code>generate</code></li>
</ul>
<pre><code class="python">def generate()
</code></pre>

<p>Only in generative script mode. Generate an object file based on processed top-level AST. You should call <code>process_top_level</code> before calling this function. The path of the output file is specified in the command line argument of the compiler.</p>
<ul>
<li><code>set_print_ir</code></li>
</ul>
<pre><code class="python">def set_print_ir(flag: bool)
</code></pre>

<p>Only in generative script mode. Set whether the compiler will output the LLVM IR for the generated program to stderr after calling <code>generate</code>. If the <code>flag</code> is True, the printing behavior is on.</p>
<h3 id="typical-workflow-of-a-generative-script">Typical workflow of a generative script</h3>
<p>In a typical generative script, it may first call <code>top_level</code> to feed the source code into the compiler. Then it calls <code>process_top_level</code> to process the program. Optionally, it calls <code>generate</code> to generate the object file of the code. It may also optionally call <code>clear_compile_unit</code> to reset the compiler and reuse the compiler for another Birdee program.</p>
<h2 id="environment-queries">Environment queries</h2>
<ul>
<li><code>get_os_name</code></li>
</ul>
<pre><code class="python">def get_os_name() -&gt; str
</code></pre>

<p>Get the name of target OS. Note: the target OS is what the output object file is compiled for and it may be different from the OS that the compiler runs on. Returns "windows", "linux" or "unknown target name".</p>
<ul>
<li><code>get_target_bits</code></li>
</ul>
<pre><code class="python">def get_target_bits() -&gt; int
</code></pre>

<p>Get the bits of the target object file. Returns an integer, maybe 64 or 32.</p>
<h2 id="compiler-state-queries-and-control">Compiler state queries and control</h2>
<ul>
<li><code>imports</code></li>
</ul>
<pre><code class="python">def imports(module_name: str)
</code></pre>

<p>Import a Birdee module. It has the same effect as the Birdee keyword <code>import</code> in Birdee code. The difference is that it is a Python function. It accepts a string which is the module name or a symbol within a module. e.g. "concurrent.threading" or "concurrent.threading:thread" are valid input for this function.</p>
<ul>
<li><code>get_cur_script</code></li>
</ul>
<pre><code class="python">def get_cur_script() -&gt; ScriptAST
</code></pre>

<p>Can only be called within a embeded script (<code>{@...@}</code>) for statements. Returns the current ScriptAST that the script is in.</p>
<ul>
<li><code>class_body</code></li>
</ul>
<pre><code class="python">def class_body(clz: ClassAST, source: str)
</code></pre>

<p>Insert a chunk of code in the class body of a class. The class is specified by the argument <code>clz</code>. The code is specified in the argument <code>source</code>. Note that only one function or one line of member variable is added to the class in a call to <code>class_body</code> at a time. If your <code>source</code> contains more than one line to insert and it is not a function definition, the lines after the first valid member definition will be ignored. A single line of multiple member variable definition is accepted in this case, since the members are defined in one single line. A member function that occupies multiple lines are also accepted by this function.</p>
<ul>
<li><code>size_of</code></li>
</ul>
<pre><code class="python">def resolve_type(type: ResolvedType) -&gt; int
</code></pre>

<p>Get the size of a type, in bytes. Currently the input <code>type</code> cannot a struct type. </p>
<ul>
<li><code>expr</code></li>
</ul>
<pre><code class="python">def expr(source: str) -&gt; StatementAST_UniquePtr
</code></pre>

<p>Converts a Birdee source code string into an AST. Expecting an expression. Takes the ownership of the returned AST.</p>
<ul>
<li><code>stmt</code></li>
</ul>
<pre><code class="python">def stmt(source: str) -&gt; StatementAST_UniquePtr
</code></pre>

<p>Converts a Birdee source code string into an AST. Expecting an statement. Takes the ownership of the returned AST.</p>
<ul>
<li><code>set_ast</code></li>
</ul>
<pre><code class="python">def set_ast(ast: StatementAST_UniquePtr) 
</code></pre>

<p>Can only be called in embeded script for statements. Sets the current script AST with the given AST node. It will take the ownership of the input AST. You can call this function multiple times to combine multiple lines of Birdee code into in ScriptAST node. All of the Birdee code set into the ScriptAST will be generated and executed. The value of the resulting ScriptAST node will be the result of the first Birdee code set into the ast.</p>
<ul>
<li><code>resolve_type</code></li>
</ul>
<pre><code class="python">def resolve_type(source: str) -&gt; ResolvedType
</code></pre>

<p>Convert a string representation of a Birdee type into a <code>ResolvedType</code> AST. The input string should be any valid Birdee type in the current script context, e.g. "int", "string". </p>
<ul>
<li><code>set_type</code></li>
</ul>
<pre><code class="python">def set_type(type: ResolvedType)
</code></pre>

<p>Can only be called in embeded script for types. Sets the current type script AST with the given resolved type.</p>
<ul>
<li><code>get_cur_func</code></li>
</ul>
<pre><code class="python">def get_cur_func() -&gt; FunctionAST
</code></pre>

<p>Returns the reference to the current function AST that the script is in, or None if is not in a function.</p>
<ul>
<li><code>get_cur_class</code></li>
</ul>
<pre><code class="python">def get_cur_class() -&gt; ClassAST
</code></pre>

<p>Returns the reference to the current class AST that the script is in, or None if is not in a class.</p>
<ul>
<li><code>get_func</code></li>
</ul>
<pre><code class="python">def get_func(name: str) -&gt; FunctionAST
</code></pre>

<p>Find the reference to the function AST with a given name, or None if it does not exist.</p>
<ul>
<li><code>get_top_level</code></li>
</ul>
<pre><code class="python">def get_top_level(name: str) -&gt; StatementASTList
</code></pre>

<p>Get the list of statements for the top-level code.</p>
<ul>
<li><code>get_compile_error</code></li>
</ul>
<pre><code class="python">def get_compile_error() -&gt; CompileError
</code></pre>

<p>Get the current compile error. You should call it when a <code>CompileException</code> occurs for more information on the error.</p>
<ul>
<li><code>get_tokenizer_error</code></li>
</ul>
<pre><code class="python">def get_tokenizer_error() -&gt; TokenizerError
</code></pre>

<p>Get the current tokenizer error. You should call it when a <code>TokenizerException</code> occurs for more information on the error.</p></div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>
            var base_url = "../..",
                shortcuts = {"search": 83, "next": 78, "help": 191, "previous": 80};
        </script>
        <script src="../../js/base.js" defer></script>
        <script src="../../search/main.js" defer></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="exampleModalLabel">Search</h4>
            </div>
            <div class="modal-body">
                <p>
                    From here you can search these documents. Enter
                    your search terms below.
                </p>
                <form role="form">
                    <div class="form-group">
                        <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="Keyboard Shortcuts Modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="exampleModalLabel">Keyboard Shortcuts</h4>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
