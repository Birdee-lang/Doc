<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../../img/favicon.ico">
        <title>The automatic building tool for Birdee - bbuild - Birdee Language</title>
        <link href="../../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../../css/font-awesome.min.css" rel="stylesheet">
        <link href="../../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
        <![endif]-->

        <script src="../../js/jquery-1.10.2.min.js" defer></script>
        <script src="../../js/bootstrap-3.0.3.min.js" defer></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script> 
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
            <div class="container">

                <!-- Collapsed navigation -->
                <div class="navbar-header">
                    <!-- Expander button -->
                    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand" href="../..">Birdee Language</a>
                </div>

                <!-- Expanded navigation -->
                <div class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li >
                                <a href="../..">Welcome</a>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">Birdee Language Mannual <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li >
    <a href="../../Birdee Language Mannual/0010HelloWorld/">1. Hello world!</a>
</li>
                                    
<li >
    <a href="../../Birdee Language Mannual/0020Basics/">2. Language Basics</a>
</li>
                                    
<li >
    <a href="../../Birdee Language Mannual/0030FlowControl/">3. Flow Control</a>
</li>
                                    
<li >
    <a href="../../Birdee Language Mannual/0040ScopeAndName/">4. Scope and names</a>
</li>
                                    
<li >
    <a href="../../Birdee Language Mannual/0050Array/">5. Array</a>
</li>
                                    
<li >
    <a href="../../Birdee Language Mannual/0060Class/">6. Class</a>
</li>
                                    
<li >
    <a href="../../Birdee Language Mannual/0070Import/">7. Modules and Imports</a>
</li>
                                    
<li >
    <a href="../../Birdee Language Mannual/0080Template/">8. Templates</a>
</li>
                                    
<li >
    <a href="../../Birdee Language Mannual/0090Script/">9. Compile-time scripts</a>
</li>
                                    
<li >
    <a href="../../Birdee Language Mannual/0100Cpp/">10. Interoperability with C/C++</a>
</li>
                                    
<li >
    <a href="../../Birdee Language Mannual/0110Functional/">11. Functional Programming</a>
</li>
                                    
<li >
    <a href="../../Birdee Language Mannual/0120Exception/">12. Exception handling</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">Python Binding <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li >
    <a href="../../Python Binding/0010.Overview/">Python binding for Birdee</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown active">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">Tools <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li >
    <a href="../Birdee-playground-(REPL)/">Birdee playground</a>
</li>
                                    
<li >
    <a href="../Compiler-command-line-mannual/">Command line arguments for compiler (birdeec)</a>
</li>
                                    
<li class="active">
    <a href="./">The automatic building tool for Birdee - bbuild</a>
</li>
                                </ul>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav navbar-right">
                        <li>
                            <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li >
                                <a rel="next" href="../Compiler-command-line-mannual/">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li class="disabled">
                                <a rel="prev" >
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
                <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
        <li class="main active"><a href="#the-automatic-building-tool-for-birdee-bbuild">The automatic building tool for Birdee - bbuild</a></li>
            <li><a href="#requirements">Requirements</a></li>
            <li><a href="#what-does-bbuild-do">What does bbuild do?</a></li>
            <li><a href="#how-to-use-bbuild">How to use bbuild?</a></li>
    </ul>
</div></div>
                <div class="col-md-9" role="main">

<h1 id="the-automatic-building-tool-for-birdee-bbuild">The automatic building tool for Birdee - bbuild</h1>
<p>The Birdee compiler "birdeec" only generates object files from Birdee source code, but it does not help you to link it. In large projects, the dependencies among modules could be complicated. Without bbuild, users may resort to Makefile or other building tools to compile and link such projects, which involves manually writing Makefiles or other configuration files to tell the building tool about the dependencies. bbuild aims to free the users from manually managing the building configuration by automatically finding and compiling the dependencies. In addition, bbuild can optionally link the program with all dependencies.</p>
<h2 id="requirements">Requirements</h2>
<p>bbuild is a Python3 program. It depends on native compiler tool sets: On Linux, it depends on gcc; On Windows, it depends on MSVC. Make sure these dependencies are installed in your system before using bbuild. To use the linker of MSVC, you need to run bbuild in the Visual Studio x64 Commmand Prompt.</p>
<h2 id="what-does-bbuild-do">What does bbuild do?</h2>
<p>You should specify a "root" module to compile. Given a "root" module, bbuild will find all modules the root module directly or indirectly depends on. For all dependent Birdee modules, bbuild first finds any compiled object file of the dependent module. If no compiled object file is found, bbuild searches the Birdee source code using the module name and compiles the found module source code into object file. Finally, if the user requires to link the root module with all dependent modules, bbuild will call the native linker (linker.exe on Windows or gcc on Linux) to link all object files.</p>
<p>Like building tools including Makefile, bbuild will check the timestamps of the source code files and the resulting binary files. It will only re-compile the modified source code files since the last build, and skip the unchanged source files. </p>
<h2 id="how-to-use-bbuild">How to use bbuild?</h2>
<pre><code class="bash">python $BIRDEE_HOME/pylib/bbuild.py -i {source_dir} -o {out_dir} [-bs {binary_file_search_path}] [-le {link_executable_target}] [-lc &quot;{link_command}&quot;] [-j {thread_num}] root_module1 [other_root_modules...]
</code></pre>

<ul>
<li>-i: the source root dir</li>
<li>-o: the output object file root dir</li>
<li>-le: link to an executable. The path to the link target</li>
<li>-bs: binary *.bmm and *.obj/*.o file search root dir. The out_dir specified by "-o" switch is automatically added to the binary search path</li>
<li>-lc: The extra commands to pass to the linker. It is recommended to add a pair of "" around link_command</li>
<li>-j: set the number of parallel compilers </li>
<li>root_modules: a list of the module names, e.g. org.bird.quail. bbuild will find source from source_root_dir/org/bird/quail.{txt/bdm}. It will also resolve any direct or indirect dependencies of it.</li>
</ul>
<p>You can specify multiple search directories by adding multiple "-i", "-bs" switches. For any dependent module, bbuild will first search the paths given by "-bs" switch. e.g. Given "-o /home/menooker/bin -bs /home/menooker/birdee" and a module "org.bird.quail", bbuild will search for file "/home/menooker/birdee/org/bird/quail.bmm" or "/home/menooker/bin/org/bird/quail.bmm". If the binary file is not found, bbuild will try to compile it from the source code. Given "-i /home/menooker/project", it will search for source file "/home/menooker/project/org/bird/quail.{txt,bdm}". The compiled binary of module will be at "/home/menooker/bin/org/bird/quail.bmm".</p>
<p>For example, let's compile the main module test_package.b.mod2 (The code can be found in "tests" of Birdee source code). The commands and outputs are shown below</p>
<pre><code>menooker@DESKTOP:~/Birdee/tests$ cat test_package/b/mod2.txt
package test_package.b

import test_package.a.mod1:func
import logic_obj_cmp:a

func()
println(a)
menooker@DESKTOP:~/Birdee/tests$ find test_package/*
test_package/a
test_package/a/mod1.txt
test_package/b
test_package/b/functype_test_lib.txt
test_package/b/mod2.txt
menooker@DESKTOP:~/Birdee/tests$ ls logic_obj_cmp.txt
logic_obj_cmp.txt
menooker@DESKTOP:~/Birdee/tests$ python3 $BIRDEE_HOME/pylib/bbuild.py -i . -o linuxbin test_package.b.mod2 -le linuxbin/mod2 -lc &quot;-g -lpthead&quot;
Running command /home/menooker/Birdee/BirdeeHome/bin/birdeec -i ./test_package/b/mod2.txt --print-import
Running command /home/menooker/Birdee/BirdeeHome/bin/birdeec -i ./test_package/a/mod1.txt --print-import
Running command /home/menooker/Birdee/BirdeeHome/bin/birdeec -i ./logic_obj_cmp.txt --print-import
Running command /home/menooker/Birdee/BirdeeHome/bin/birdeec -i ./test_package/a/mod1.txt -o linuxbin/test_package/a/mod1.o -l /home/menooker/Birdee/BirdeeHome/blib -l . -l linuxbin
Wrote linuxbin/test_package/a/mod1.o
Running command /home/menooker/Birdee/BirdeeHome/bin/birdeec -i ./logic_obj_cmp.txt -o linuxbin/logic_obj_cmp.o -l /home/menooker/Birdee/BirdeeHome/blib -l . -l linuxbin
Wrote linuxbin/logic_obj_cmp.o
Running command /home/menooker/Birdee/BirdeeHome/bin/birdeec -i ./test_package/b/mod2.txt -o linuxbin/test_package/b/mod2.o -l /home/menooker/Birdee/BirdeeHome/blib -l . -l linuxbin -e
Wrote linuxbin/test_package/b/mod2.o
Running command gcc -o linuxbin/mod2 -Wl,--start-group /home/menooker/Birdee/BirdeeHome/lib/libBirdeeRuntime.a /home/menooker/Birdee/BirdeeHome/blib/birdee.o linuxbin/test_package/a/mod1.o linuxbin/logic_obj_cmp.o linuxbin/test_package/b/mod2.o -lgc -Wl,--end-group -g -lpthead
menooker@DESKTOP:~/Birdee/tests$ find linuxbin/*
linuxbin/logic_obj_cmp.bmm
linuxbin/logic_obj_cmp.o
linuxbin/mod2
linuxbin/test_package
linuxbin/test_package/a
linuxbin/test_package/a/mod1.bmm
linuxbin/test_package/a/mod1.o
linuxbin/test_package/b
linuxbin/test_package/b/mod2.bmm
linuxbin/test_package/b/mod2.o
</code></pre></div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>
            var base_url = "../..",
                shortcuts = {"search": 83, "next": 78, "help": 191, "previous": 80};
        </script>
        <script src="../../js/base.js" defer></script>
        <script src="../../search/main.js" defer></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="exampleModalLabel">Search</h4>
            </div>
            <div class="modal-body">
                <p>
                    From here you can search these documents. Enter
                    your search terms below.
                </p>
                <form role="form">
                    <div class="form-group">
                        <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="Keyboard Shortcuts Modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="exampleModalLabel">Keyboard Shortcuts</h4>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
